# General configuration
errorlog: stderr
logoutput: stderr  # Changed from /dev/null for better debugging

# Listen on all local IPv4 addresses on port 1080
internal: 0.0.0.0 port=1080

# Outbound network interface (set dynamically in entrypoint script)
external: eth0  # Placeholder, will be replaced dynamically

# No client authentication required
clientmethod: none
socksmethod: none

# Run as non-privileged user
user.privileged: nobody
user.unprivileged: nobody
user.libwrap: nobody

# Client and SOCKS rules
client pass {
    from: 100.64.0.0/10 to: 0.0.0.0/0  # Restrict to CGNAT/private IPs
}
socks pass {
    from: 0.0.0.0/0 to: 0.0.0.0/0
}
